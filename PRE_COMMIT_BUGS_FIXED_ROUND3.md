# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Pre-commit - –†–∞—É–Ω–¥ 3

## –ò—Ç–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 0 –±–∞–≥–æ–≤

–ü–æ—Å–ª–µ —Ç—â–∞—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pre-commit –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

1. **lint-staged –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤**:
   - ESLint –∏ Prettier –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ª—É—á–∞—é—Ç —Ñ–∞–π–ª—ã –æ—Ç lint-staged –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - lint-staged –≤–µ—Ä—Å–∏–∏ 16.2.7 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ –∫–æ–º–∞–Ω–¥—ã
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è lint-staged**:
   - `src/**/*.ts` ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º
   - `*.{json,md,yml,yaml}` ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
   - `.github/**/*.yml` ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç GitHub Actions workflow —Ñ–∞–π–ª—ã
   - `prisma/schema.prisma` ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Prisma —Å—Ö–µ–º—É

3. **ESLint –∫–æ–º–∞–Ω–¥–∞**:
   - `--fix` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∏
   - `--max-warnings=0` ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ warnings
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å lint-staged

4. **Prettier –∫–æ–º–∞–Ω–¥–∞**:
   - `--write` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å lint-staged

5. **Husky —Ö—É–∫**:
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.husky/pre-commit`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è husky v9
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `prepare` —Å–∫—Ä–∏–ø—Ç

6. **Git ignore**:
   - `.husky/` –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
   - `dist/`, `node_modules/`, `coverage/` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

## –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (lint-staged)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ `src/**/*.ts` (–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç dist/)
- –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (ESLint, Prettier) –≤ pre-commit
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (type-check, tests) –≤ CI/CD

### ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:

- ESLint –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç –ø—Ä–∏ warnings (`--max-warnings=0`)
- Prettier –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫–æ–¥
- Prisma —Å—Ö–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è
- GitHub Actions workflow —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è

### ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:

- Husky –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- lint-staged –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è)

```json
{
  "lint-staged": {
    "src/**/*.ts": ["eslint --fix --max-warnings=0", "prettier --write"],
    "*.{json,md,yml,yaml}": ["prettier --write"],
    "prisma/schema.prisma": ["prisma format"],
    ".github/**/*.yml": ["prettier --write"]
  }
}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã:

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
2. **–°—Ç—Ä–æ–≥–æ—Å—Ç—å**: ESLint –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç –ø—Ä–∏ warnings
3. **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ –Ω—É–∂–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### ‚ö†Ô∏è –ù–∞–º–µ—Ä–µ–Ω–Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ (–¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏):

1. **TypeScript type-check**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ CI/CD
2. **Prisma validate**: –¢—Ä–µ–±—É–µ—Ç DATABASE_URL, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ CI/CD
3. **–¢–µ—Å—Ç—ã**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ CI/CD

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ Pre-commit —Ö—É–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –±–∞–≥–æ–≤
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: 0 –±–∞–≥–æ–≤ (–≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ)
- **–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: 3 –±–∞–≥–∞ (–≤—Å–µ–≥–æ –∑–∞ –≤—Å–µ —Ä–∞—É–Ω–¥—ã)
- **–°—Ç–∞—Ç—É—Å**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã ‚úÖ

## –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ pre-commit –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. ‚úÖ lint-staged –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ –∫–æ–º–∞–Ω–¥—ã
2. ‚úÖ ESLint –ø—Ä–∞–≤–∏–ª—å–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–º–º–∏—Ç –ø—Ä–∏ warnings
3. ‚úÖ Prettier –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã
4. ‚úÖ Husky –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
5. ‚úÖ –í—Å–µ –ø—É—Ç–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
6. ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

Pre-commit —Ö—É–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
