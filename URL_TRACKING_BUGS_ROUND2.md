# üêõ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–≥–∏ –≤ –º–æ–¥—É–ª–µ URL Tracking (–†–∞—É–Ω–¥ 2)

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: 5 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–ê–ì–ò

### ‚úÖ BUG 15: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É DTO –∏ —Å–µ—Ä–≤–∏—Å–æ–º - domain –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ DTO, –Ω–æ –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –≤ –ª–æ–≥–∏–∫–µ - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `CreateUrlActivityDto` –ø–æ–ª–µ `domain` –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ `@IsNotEmpty()`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ù–æ –≤ —Å–µ—Ä–≤–∏—Å–µ –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞ –∏–∑ URL, –µ—Å–ª–∏ –æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ - DTO —Ç—Ä–µ–±—É–µ—Ç domain, –Ω–æ —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –Ω–µ–≥–æ.

**–°—Ç—Ä–æ–∫–∏:**

- DTO: 47-52 (`@IsNotEmpty()`)
- –°–µ—Ä–≤–∏—Å: 150-151 (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- `domain` —Å–¥–µ–ª–∞–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –≤ DTO (`@IsOptional()`)
- –û–±–Ω–æ–≤–ª–µ–Ω —Ç–∏–ø –Ω–∞ `domain?: string`
- –í —Å–µ—Ä–≤–∏—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `activity.domain?.trim()`

### BUG 16: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ BlockedUrl

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –ø—Ä–æ–≤–µ—Ä–∫–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `OR` —Å —É—Å–ª–æ–≤–Ω—ã–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ spread. –ï—Å–ª–∏ –≤—Å–µ —Ç—Ä–∏ –ø–æ–ª—è null, –º–∞—Å—Å–∏–≤ `OR` –±—É–¥–µ—Ç –ø—É—Å—Ç—ã–º, –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. –¢–∞–∫–∂–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å—å —Å `url="test", domain=null, pattern=null`, –∏ –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å `url=null, domain=null, pattern="test"`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –Ω–∞–π–¥–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç (—á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ), –Ω–æ –µ—Å–ª–∏ –µ—Å—Ç—å `url="test"` –∏ –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å `url="test"`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞–π—Ç–∏.

**–°—Ç—Ä–æ–∫–∏:** 82-104

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ `OR` –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –µ—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è null –∏–ª–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ - –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –æ—Ç–¥–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –æ–Ω–æ —É–∫–∞–∑–∞–Ω–æ.

### BUG 17: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å IP –∞–¥—Ä–µ—Å–∞–º–∏ –≤ extractDomain

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `extractDomain` –∏–∑–≤–ª–µ–∫–∞–µ—Ç `hostname`, –∫–æ—Ç–æ—Ä—ã–π –¥–ª—è IP –∞–¥—Ä–µ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://192.168.1.1`) –≤–µ—Ä–Ω–µ—Ç IP –∞–¥—Ä–µ—Å. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ, –Ω–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ–º–µ–Ω, –∞ –Ω–µ IP.

**–°—Ç—Ä–æ–∫–∏:** 86-115

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ –¥–æ–º–µ–Ω –Ω–µ —è–≤–ª—è–µ—Ç—Å—è IP –∞–¥—Ä–µ—Å–æ–º, –∏–ª–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å IP –∞–¥—Ä–µ—Å–∞ —è–≤–Ω–æ.

### BUG 18: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `create()` –∏ `createBatch()` –¥–æ–º–µ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω –≤—Ä—É—á–Ω—É—é, –Ω–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —ç—Ç–æ –≤–∞–ª–∏–¥–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–µ IP, –Ω–µ localhost –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∏ —Ç.–¥.).

**–°—Ç—Ä–æ–∫–∏:** 147-157, 402-429

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∞ –¥–æ–º–µ–Ω–∞ (regex –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–æ–≤).

## üü° –í–ê–ñ–ù–´–ï –ë–ê–ì–ò

### ‚úÖ BUG 19: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ batch - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ batch –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã, –º–µ—Ç–æ–¥ –≤–µ—Ä–Ω–µ—Ç `{ count: 0, skipped: N, activities: [] }`. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ, –Ω–æ –Ω–µ—Ç —è–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ.

**–°—Ç—Ä–æ–∫–∏:** 348-470

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å—è—Ö –≤ –æ—Ç–≤–µ—Ç–µ (`skippedDetails`)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥, –µ—Å–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã
- –ö–∞–∂–¥–∞—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω–¥–µ–∫—Å, URL –∏ –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–ø—É—Å–∫–∞

### BUG 20: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏. –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL –ø—Ä–æ–≤–µ—Ä–∫–∞ `isUrlBlocked` –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π.

**–°—Ç—Ä–æ–∫–∏:** 22-61, 293-297

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞–∫—Å–∏–º—É–º 1000 –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—é) –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É (–∏–Ω–¥–µ–∫—Å—ã, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ).

### ‚úÖ BUG 21: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å case-sensitive —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º URL - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `isUrlBlockedSync` —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ URL —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É (`url === blocked.url`), –Ω–æ URL –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Ä–∞–∑–Ω–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, `https://Example.com` –∏ `https://example.com` - —ç—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ URL, –Ω–æ –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —Ä–∞–∑–Ω—ã–º–∏.

**–°—Ç—Ä–æ–∫–∏:** 29-30

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- URL –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –∫ lowercase –ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ null/undefined –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å case-insensitive

### BUG 22: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ –¥–æ–º–µ–Ω–∞ –≤ DTO

**–ü—Ä–æ–±–ª–µ–º–∞:** –í DTO –µ—Å—Ç—å `@MaxLength(255)`, –Ω–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–æ–º–µ–Ω–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º –¥–æ–º–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º, –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∞).

**–°—Ç—Ä–æ–∫–∏:** 40-52

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∞ –¥–æ–º–µ–Ω–∞ —á–µ—Ä–µ–∑ regex –∏–ª–∏ `@Matches()`.

### BUG 23: –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –≤ batch - –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫–∏–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `createBatch()` –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –∑–∞–ø–∏—Å–µ–π (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π URL, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ –≤ –æ—Ç–≤–µ—Ç–µ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –∑–∞–ø–∏—Å–∏ –±—ã–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã –∏ –ø–æ—á–µ–º—É.

**–°—Ç—Ä–æ–∫–∏:** 405-429, 438-445

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å—è—Ö —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏.

### ‚úÖ BUG 24: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É title –ø–æ—Å–ª–µ trim - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `createBatch()` –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã `title` –ø–æ—Å–ª–µ trim. –ú–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (500 —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ DTO).

**–°—Ç—Ä–æ–∫–∏:** 464

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `sanitizedTitle.length > 500` –≤ `createBatch()`
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –∑–∞–ø–∏—Å—å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

## üü¢ –ú–ï–õ–ö–ò–ï –ë–ê–ì–ò

### ‚úÖ BUG 25: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ indexOf –≤ —Ü–∏–∫–ª–µ - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `createBatch()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dto.activities.indexOf(activity)` –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞, —á—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (O(n¬≤) —Å–ª–æ–∂–Ω–æ—Å—Ç—å).

**–°—Ç—Ä–æ–∫–∏:** 412, 424

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- –ó–∞–º–µ–Ω–µ–Ω `forEach` –Ω–∞ `for (let index = 0; index < dto.activities.length; index++)`
- –ò–Ω–¥–µ–∫—Å —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –ø–æ–∏—Å–∫–∞
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å O(n¬≤) –¥–æ O(n)

### BUG 26: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null/undefined –≤ isUrlBlockedSync

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `isUrlBlockedSync` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `url` –∏ `domain` –Ω–µ null/undefined –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π.

**–°—Ç—Ä–æ–∫–∏:** 22-61

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null/undefined –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞.

### BUG 27: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Ä—Ç–∞–º–∏ –≤ –¥–æ–º–µ–Ω–∞—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** `extractDomain` –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ `hostname`, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –ø–æ—Ä—Ç. –ù–æ –µ—Å–ª–∏ URL —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://example.com:8080`), –¥–æ–º–µ–Ω –±—É–¥–µ—Ç `example.com`, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–ª –¥–æ–º–µ–Ω —Å –ø–æ—Ä—Ç–æ–º.

**–°—Ç—Ä–æ–∫–∏:** 93

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –¥–æ–º–µ–Ω (—É–∂–µ —Ç–∞–∫ –∏ –µ—Å—Ç—å, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π).

### BUG 28: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL —Ñ–æ—Ä–º–∞—Ç–∞ –≤ batch –ø–µ—Ä–µ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –¥–æ–º–µ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `createBatch()` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `extractDomain` –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ URL —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É (http:// –∏–ª–∏ https://). DTO –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —ç—Ç–æ, –Ω–æ –µ—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è DTO –ø—Ä–æ–ø—É—â–µ–Ω–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∞.

**–°—Ç—Ä–æ–∫–∏:** 405-406

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–æ—Ä–º–∞—Ç–∞ URL –ø–µ—Ä–µ–¥ `extractDomain` –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É –±–æ–ª–µ–µ —è–≤–Ω–æ.
