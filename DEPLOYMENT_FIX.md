# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "port is already allocated" –¥–ª—è PostgreSQL

## –ü—Ä–æ–±–ª–µ–º–∞

```
Error: Bind for 0.0.0.0:5432 failed: port is already allocated
```

## –†–µ—à–µ–Ω–∏–µ

–ü–æ—Ä—Ç PostgreSQL –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞—Ä—É–∂—É. PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

- ‚úÖ –£–±—Ä–∞–Ω –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ `5432` –Ω–∞—Ä—É–∂—É –≤ `docker-compose.yml`
- ‚úÖ –£–±—Ä–∞–Ω –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –≤ `docker-compose.prod.yml`
- ‚úÖ PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏ —á–µ—Ä–µ–∑ –∏–º—è `postgres:5432`

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã)
docker-compose down

# 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ (pull –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
git pull

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–Ω–æ–≤–æ
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose ps
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

```bash
# PostgreSQL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
docker-compose exec backend npx prisma db push --skip-generate

# –ò–ª–∏ —á–µ—Ä–µ–∑ psql –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose exec postgres psql -U postgres -d timetracker
```

### –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ PostgreSQL —Å–Ω–∞—Ä—É–∂–∏:

–ï—Å–ª–∏ –≤–∞–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ PostgreSQL —Å —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –±—ç–∫–∞–ø–æ–≤ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è), –≤—ã –º–æ–∂–µ—Ç–µ:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5433):

   ```yaml
   ports:
     - "5433:5432"
   ```

2. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH —Ç—É–Ω–Ω–µ–ª—å**:

   ```bash
   ssh -L 5432:localhost:5432 user@server
   ```

3. **–ò–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ Docker exec**:
   ```bash
   docker-compose exec postgres psql -U postgres -d timetracker
   ```

### –í–∞–∂–Ω–æ:

- Backend –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ PostgreSQL —á–µ—Ä–µ–∑ –∏–º—è `postgres:5432` –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏
- –≠—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–∞ –Ω–∞—Ä—É–∂—É
- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Docker network
