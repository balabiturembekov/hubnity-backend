# ‚úÖ URL Tracking - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è URL (URL Tracking) –¥–ª—è desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Hubnity.

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Prisma)

#### `UrlActivity`

- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ URL
- –°–≤—è–∑–∏ —Å `TimeEntry` –∏ `User`
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–ª—è: `url`, `domain`, `title`, `timeSpent`, `startTime`, `endTime`

#### `BlockedUrl`

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ URL –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∞–Ω–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ:
  - –¢–æ—á–Ω–æ–º—É URL
  - –î–æ–º–µ–Ω—É (–≤–µ—Å—å –¥–æ–º–µ–Ω)
  - Regex –ø–∞—Ç—Ç–µ—Ä–Ω—É (—Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)

### 2. API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### URL Activity

**POST `/api/url-activity`**

- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ URL
- –í–∞–ª–∏–¥–∞—Ü–∏—è URL, –≤—Ä–µ–º–µ–Ω–∏, –¥–∞—Ç
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ URL
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**POST `/api/url-activity/batch`**

- Batch —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π (–¥–æ 100 –∑–∞ —Ä–∞–∑)
- –ü—Ä–æ–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

**GET `/api/url-activity/time-entry/:timeEntryId/stats`**

- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ URL –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**GET `/api/url-activity/user/:userId/stats`**

- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ URL –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### Blocked URLs

**GET `/api/blocked-urls`**

- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL
- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**POST `/api/blocked-urls`**

- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ URL, –¥–æ–º–µ–Ω–∞ –∏–ª–∏ regex –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è regex –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã
- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**DELETE `/api/blocked-urls/:id`**

- –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### 3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ URL

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ–≥–æ URL
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ regex –ø–∞—Ç—Ç–µ—Ä–Ω–∞
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –∏–∑ URL
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (—É–¥–∞–ª–µ–Ω–∏–µ www)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –í–∞–ª–∏–¥–∞—Ü–∏—è

- URL —Ñ–æ—Ä–º–∞—Ç (http:// –∏–ª–∏ https://)
- –í—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (0-86400 —Å–µ–∫—É–Ω–¥)
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞—Ç
- –ü—Ä–æ–≤–µ—Ä–∫–∞ `endTime > startTime`
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–æ–ª–µ–π

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö –∑–∞–ø–∏—Å–µ–π)
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions

### 4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ URL –ø–æ –¥–æ–º–µ–Ω–∞–º
- –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –¥–æ–º–µ–Ω
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ –¥–æ–º–µ–Ω

#### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É)
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

- –ü–æ –¥–∞—Ç–∞–º (startDate, endDate)
- –ü–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ü–æ time entry

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

‚úÖ **TEST 1**: POST /api/url-activity - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
‚úÖ **TEST 2**: POST /api/url-activity/batch - batch —Å–æ–∑–¥–∞–Ω–∏–µ (2 –∑–∞–ø–∏—Å–∏)
‚úÖ **TEST 3**: GET /api/url-activity/time-entry/:id/stats - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (3 –¥–æ–º–µ–Ω–∞, 3300 —Å–µ–∫)
‚úÖ **TEST 4**: GET /api/url-activity/user/:id/stats - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ **TEST 5**: GET /api/blocked-urls - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ (–ø—É—Å—Ç–æ–π)
‚úÖ **TEST 6**: POST /api/blocked-urls - —Å–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
‚úÖ **TEST 7**: –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å URL –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ - –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ ‚úÖ
‚úÖ **TEST 8**: DELETE /api/blocked-urls/:id - —É–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
‚úÖ **TEST 9**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
‚úÖ **TEST 10**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ URL

```json
POST /api/url-activity
{
  "timeEntryId": "uuid",
  "url": "https://github.com/user/repo",
  "domain": "github.com",
  "title": "GitHub Repository",
  "timeSpent": 1800
}
```

### Batch —Å–æ–∑–¥–∞–Ω–∏–µ

```json
POST /api/url-activity/batch
{
  "activities": [
    {
      "timeEntryId": "uuid",
      "url": "https://stackoverflow.com/questions/123",
      "domain": "stackoverflow.com",
      "timeSpent": 900
    }
  ]
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ time entry

```json
GET /api/url-activity/time-entry/:id/stats
{
  "timeEntryId": "uuid",
  "totalTime": 3300,
  "totalActivities": 3,
  "domains": [
    {
      "domain": "github.com",
      "totalTime": 1800,
      "count": 1,
      "activities": [...]
    }
  ]
}
```

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ–º–µ–Ω–∞

```json
POST /api/blocked-urls
{
  "domain": "facebook.com"
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- ‚úÖ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö time entries
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –ø–æ–ª—è—Ö
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
- ‚úÖ Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

## ‚úÖ –ò—Ç–æ–≥

**URL Tracking –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ URL —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Desktop Backend: ~95%** ‚¨ÜÔ∏è

–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:

- –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è (GPS Tracking) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è time entries –∏ screenshots - —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
