# Проверка соответствия Swagger документации реальным данным

## Найденные несоответствия

### 1. TimeEntriesController.update() - Отсутствует avatar в user объекте ✅ КОРРЕКТНО

**Файл**: `src/time-entries/time-entries.controller.ts`

**Проверка**:

- Сервис возвращает: `user: { id, name, email }` (без avatar)
- Swagger схема: `user: { id, name, email }` (без avatar)
- **Статус**: ✅ Соответствует

### 2. CreateUserDto - Отсутствует валидация максимальной длины пароля ⚠️

**Файл**: `src/users/dto/create-user.dto.ts`

**Проблема**:

- DTO: `@MinLength(8)` - только минимум
- Сервис проверяет: `length < 8` и `length > 128`
- Swagger: указан только `minLength: 8`

**Рекомендация**: Добавить `@MaxLength(128)` в DTO и `maxLength: 128` в Swagger

### 3. CreateUserDto - Отсутствует валидация сложности пароля ⚠️

**Проблема**:

- DTO: нет проверки на наличие букв и цифр
- Сервис проверяет: `hasLetter && hasNumber`
- Swagger: нет описания требования к паролю

**Рекомендация**: Добавить описание в Swagger: "Password must contain at least one letter and one number"

### 4. CreateUserDto - Отсутствует валидация максимальной длины имени ⚠️

**Проблема**:

- DTO: `@MaxLength(255)` ✅
- Сервис проверяет: `length > 255` ✅
- Swagger: `maxLength: 255` ✅
- **Статус**: ✅ Соответствует

### 5. CreateUserDto - Отсутствует валидация hourlyRate максимума ⚠️

**Проблема**:

- DTO: `@Min(0)` - только минимум
- Сервис проверяет: `hourlyRate < 0` и `hourlyRate > 10000`
- Swagger: указан только `minimum: 0`

**Рекомендация**: Добавить `@Max(10000)` в DTO и `maximum: 10000` в Swagger

### 6. CreateProjectDto - Отсутствует валидация максимума budget ⚠️

**Проблема**:

- DTO: `@Min(0)` - только минимум
- Сервис проверяет: `budget < 0` и `budget > 999999999`
- Swagger: указан только `minimum: 0`

**Рекомендация**: Добавить `@Max(999999999)` в DTO и `maximum: 999999999` в Swagger

### 7. CreateTimeEntryDto - projectId обязателен для сотрудников ⚠️

**Проблема**:

- DTO: `@IsOptional()` - помечен как опциональный
- Сервис: для EMPLOYEE проект обязателен
- Swagger: указано "обязателен для сотрудников" в описании

**Статус**: ⚠️ Частично корректно - описание есть, но валидация на уровне DTO невозможна (зависит от роли пользователя)

### 8. UpdateTimeEntryDto - Отсутствует валидация максимума duration ⚠️

**Проблема**:

- DTO: `@Max(2147483647)` ✅
- Swagger: `maximum: 2147483647` ✅
- **Статус**: ✅ Соответствует

## Итоговая сводка

### ✅ Полностью корректные эндпоинты

- Все схемы ответов соответствуют реальным данным
- Структуры данных в Swagger совпадают с возвращаемыми сервисами

### ⚠️ Требуют улучшения валидации в DTO/Swagger

1. **CreateUserDto**:
   - Добавить `@MaxLength(128)` для password
   - Добавить описание требования к паролю (буквы + цифры)
   - Добавить `@Max(10000)` для hourlyRate

2. **CreateProjectDto**:
   - Добавить `@Max(999999999)` для budget

3. **Описания в Swagger**:
   - Уточнить требования к паролю
   - Указать максимальные значения для hourlyRate и budget
